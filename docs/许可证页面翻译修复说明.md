# 许可证页面翻译修复说明

## 问题描述

访问 `http://localhost:5173/settings/license` 时，页面内容未能正确显示为简体中文。

## 修复内容

### 1. 修改的组件文件

为以下组件添加了 `useTranslation` 钩子和 `t()` 翻译函数：

- `apps/client/src/ee/licence/pages/license.tsx` - 主许可证页面
- `apps/client/src/ee/licence/components/license-details.tsx` - 许可证详情表格
- `apps/client/src/ee/licence/components/activate-license-modal.tsx` - 激活许可证模态框
- `apps/client/src/ee/licence/components/installation-details.tsx` - 安装详情卡片
- `apps/client/src/ee/licence/components/oss-details.tsx` - 开源版详情
- `apps/client/src/ee/licence/components/remove-license.tsx` - 移除许可证按钮
- `apps/client/src/components/settings/settings-sidebar.tsx` - 设置侧边栏菜单

### 2. 添加的翻译键

在 `apps/client/public/locales/zh-CN/translation.json` 中添加了以下翻译：

```json
{
  "License & Edition": "许可证与版本",
  "License": "许可证",
  "Add license": "添加许可证",
  "Update license": "更新许可证",
  "Remove license": "移除许可证",
  "Remove license key": "移除许可证密钥",
  "Are you sure you want to remove your license key? Your workspace will be downgraded to the non-enterprise version.": "您确定要移除许可证密钥吗？您的工作区将降级为非企业版。",
  "Enterprise license": "企业许可证",
  "License key": "许可证密钥",
  "Enter a valid enterprise license key. Contact sales@notedoc.com to purchase one.": "输入有效的企业许可证密钥。请联系 sales@notedoc.com 购买。",
  "e.g eyJhb.....": "例如：eyJhb.....",
  "Contact sales@notedoc.com for support and enquiries.": "如需支持和咨询，请联系 sales@notedoc.com。",
  "Edition": "版本",
  "Enterprise": "企业版",
  "Trial": "试用",
  "Licensed to": "授权给",
  "Seat count": "席位数量",
  "Issued at": "签发日期",
  "Expires at": "到期日期",
  "License ID": "许可证 ID",
  "Workspace ID": "工作区 ID",
  "Member count": "用户数量",
  "Open Source": "开源版",
  "To unlock enterprise features like SSO, MFA, Resolve comments, contact sales@notedoc.com.": "要解锁 SSO、MFA、解决评论等企业功能，请联系 sales@notedoc.com。"
}
```

### 3. 翻译的页面元素

#### 页面标题和菜单
- 设置侧边栏中的 "License & Edition" → "许可证与版本"
- 页面标题 "License" → "许可证"

#### 按钮和操作
- "Add license" → "添加许可证"
- "Update license" → "更新许可证"
- "Remove license" → "移除许可证"

#### 许可证详情表格
- "Edition" → "版本"
- "Enterprise" → "企业版"
- "Trial" → "试用"
- "Licensed to" → "授权给"
- "Seat count" → "席位数量"
- "used" → "已使用"
- "Issued at" → "签发日期"
- "Expires at" → "到期日期"
- "License ID" → "许可证 ID"
- "Status" → "状态"
- "Expired" → "已过期"
- "Valid" → "有效"

#### 安装详情
- "Workspace ID" → "工作区 ID"
- "Member count" → "用户数量"

#### 开源版信息
- "Open Source" → "开源版"
- 企业功能解锁提示

## 验证方法

运行验证脚本：

```bash
./scripts/verify-license-translation.sh
```

或手动测试：

1. 启动开发服务器：`pnpm dev`
2. 访问 `http://localhost:5173/settings/license`
3. 在账户设置中切换语言为"简体中文"
4. 确认所有文本都已正确翻译

## 技术细节

- 使用 `react-i18next` 的 `useTranslation` 钩子
- 所有硬编码的英文文本都包装在 `t()` 函数中
- 避免了翻译键的重复（复用已存在的键如 "Status", "Expired", "Valid"）
- 保持了设置侧边栏的翻译模式一致性

## 影响范围

仅影响许可证管理页面（`/settings/license`）的显示，不影响其他功能。
