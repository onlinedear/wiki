# 斜杠菜单分类重组说明

## 概述
根据用户需求，对斜杠菜单进行了重新分类和翻译优化，将原来的单一"basic"分类扩展为三个分类："基础"、"常用"和"高级"。

## 主要变更

### 1. 翻译更新

以下术语已更新：
- "文字" → "文本"
- "basic" → "基础"
- "待办列表" → "任务"
- "1级标题" → "一级标题"
- "2级标题" → "二级标题"
- "3级标题" → "三级标题"
- "代码" → "代码块"
- "图像" → "图片"
- "标注块" → "高亮块"
- "切换块" → "折叠块"
- "Draw.io (diagrams.net)" → "画布"
- "Excalidraw diagram" → "白板"
- "Subpages (Child pages)" → "子文档"

新增分类翻译：
- "common" → "常用"
- "advanced" → "高级"

### 2. 菜单项分类重组

#### 基础分类 (basic)
包含最基本的文本格式化选项：
1. 文本
2. 一级标题
3. 二级标题
4. 三级标题
5. 有序列表
6. 无序列表
7. 代码块
8. 引用
9. 分割线

#### 常用分类 (common)
包含日常使用频率较高的功能：
1. 任务
2. 图片
3. 视频
4. 文件附件
5. 表格
6. 折叠块
7. 高亮块
8. 子文档

#### 高级分类 (advanced)
包含专业和嵌入功能：
1. 行内公式
2. 公式块
3. Mermaid 图表
4. 画布 (Draw.io)
5. 白板 (Excalidraw)
6. 日期
7. Iframe 嵌入
8. Figma
9. Framer

### 3. 移除的嵌入服务
为简化菜单，以下嵌入服务已从菜单中移除：
- Airtable
- Loom
- Typeform
- Miro
- YouTube
- Vimeo
- Google Drive
- Google Sheets

## 技术实现

### 修改的文件

1. **apps/client/src/features/editor/components/slash-menu/menu-items.ts**
   - 将 `CommandGroups` 从单一的 `basic` 数组重构为三个分类：`basic`、`common`、`advanced`
   - 按照新的分类重新组织菜单项

2. **apps/client/src/features/editor/components/slash-menu/command-list.tsx**
   - 更新分类名称显示逻辑，使用 `t(category)` 进行翻译
   - 修复索引计算问题，使用 `globalIndex` 确保跨分类的正确索引

3. **apps/client/public/locales/zh-CN/translation.json**
   - 更新所有相关的中文翻译
   - 添加新的分类名称翻译

## 用户体验改进

1. **更清晰的分类**：用户可以更快地找到所需功能
2. **更准确的翻译**：使用更符合中文习惯的术语
3. **更好的组织**：将功能按使用频率和复杂度分组

## 测试建议

1. 在编辑器中输入 `/` 触发斜杠菜单
2. 验证三个分类正确显示：基础、常用、高级
3. 验证所有菜单项的中文翻译正确：
   - 基础：文本、一级/二级/三级标题、有序/无序列表、代码块、引用、分割线
   - 常用：任务、图片、视频、文件附件、表格、折叠块、高亮块、子文档
   - 高级：公式、图表（Mermaid、画布、白板）、嵌入（Iframe、Figma、Framer）
4. 测试键盘导航（上下箭头和回车）在跨分类时工作正常
5. 测试中文搜索功能（例如输入"任务"、"图片"、"画布"、"白板"等）
6. 验证移除的嵌入服务不再显示在菜单中

## 兼容性

- 保持了原有的英文搜索词（searchTerms）
- 保持了所有保留功能的命令逻辑不变
- 向后兼容，不影响现有功能
- 移除的嵌入服务功能代码仍然存在，只是不在斜杠菜单中显示

## 文本选择工具栏翻译

文本选择后出现的工具栏菜单也已完成中文翻译：
- "Text" → "文本"
- "Heading 1/2/3" → "一级/二级/三级标题"
- "To-do List" → "任务"
- "Bullet List" → "无序列表"
- "Numbered List" → "有序列表"
- "Blockquote" → "引用块"
- "Code" → "代码块"

## 日期
2024-11-22
