# 🚀 NoteDoc 一键部署方案

NoteDoc 提供多种一键部署方案，让你在几分钟内快速启动自己的文档协作平台。

---

## 📋 部署方案对比

| 方案 | 难度 | 时间 | 适用场景 | 推荐度 |
|------|------|------|----------|--------|
| Docker Compose | ⭐ 简单 | 5分钟 | 有服务器 | ⭐⭐⭐⭐⭐ |
| 宝塔面板 | ⭐ 简单 | 10分钟 | 宝塔用户 | ⭐⭐⭐⭐⭐ |
| Railway | ⭐⭐ 中等 | 10分钟 | 快速测试 | ⭐⭐⭐⭐ |
| Render | ⭐⭐ 中等 | 15分钟 | 托管服务 | ⭐⭐⭐⭐ |
| Vercel | ⭐⭐⭐ 复杂 | 20分钟 | 前端优先 | ⭐⭐⭐ |
| DigitalOcean | ⭐⭐ 中等 | 15分钟 | 云平台 | ⭐⭐⭐⭐ |

---

## 🎯 推荐方案

### 方案 1: Docker Compose（最推荐）⭐⭐⭐⭐⭐

**适用场景**: 有自己的服务器（VPS、云服务器等）

**优点**:
- ✅ 最简单、最快速
- ✅ 完全控制数据
- ✅ 性能最好
- ✅ 成本最低

**部署步骤**:

```bash
# 1. 克隆仓库
git clone https://github.com/onlinedear/wiki.git
cd wiki

# 2. 配置环境变量
cp .env.example .env
# 编辑 .env 文件，设置必要的配置

# 3. 启动服务
docker-compose up -d

# 4. 访问应用
# 打开浏览器访问 http://your-server-ip:3000
```

**详细文档**: [Docker Compose 部署指南](./NoteDoc完整部署指南.md)

---

### 方案 2: 宝塔面板（国内推荐）⭐⭐⭐⭐⭐

**适用场景**: 使用宝塔面板管理服务器

**优点**:
- ✅ 图形化界面，操作简单
- ✅ 自动配置反向代理和SSL
- ✅ 适合国内用户
- ✅ 一键备份和恢复

**部署步骤**:

```bash
# 1. 在宝塔面板安装 Docker 管理器

# 2. 创建项目目录
mkdir -p /www/wwwroot/notedoc
cd /www/wwwroot/notedoc

# 3. 下载配置文件
wget https://raw.githubusercontent.com/onlinedear/wiki/main/docker-compose.yml

# 4. 在宝塔 Docker 管理器中启动
# 或使用命令行
docker-compose up -d

# 5. 配置反向代理和SSL证书
```

**详细文档**: [宝塔面板部署指南](./宝塔面板部署指南.md)

---

### 方案 3: Railway（快速测试）⭐⭐⭐⭐

**适用场景**: 快速测试、演示、个人使用

**优点**:
- ✅ 完全免费（有限额）
- ✅ 自动配置数据库和Redis
- ✅ 自动HTTPS
- ✅ 无需信用卡

**部署步骤**:

1. **访问 Railway**: https://railway.app
2. **点击 "Start a New Project"**
3. **选择 "Deploy from GitHub repo"**
4. **选择你的 NoteDoc 仓库**
5. **Railway 会自动检测并部署**

**配置环境变量**:
```bash
APP_URL=https://your-app.railway.app
APP_SECRET=your-random-secret-key
DATABASE_URL=自动配置
REDIS_URL=自动配置
```

**免费额度**:
- 500小时/月运行时间
- 512MB RAM
- 1GB 存储

---

### 方案 4: Render（托管服务）⭐⭐⭐⭐

**适用场景**: 需要稳定托管服务

**优点**:
- ✅ 免费套餐可用
- ✅ 自动配置数据库
- ✅ 自动HTTPS
- ✅ 自动部署

**部署步骤**:

1. **访问 Render**: https://render.com
2. **点击 "New +" → "Blueprint"**
3. **连接 GitHub 仓库**
4. **Render 会读取 render.yaml 配置**
5. **点击 "Apply" 开始部署**

**免费套餐**:
- Web Service: 750小时/月
- PostgreSQL: 90天免费
- Redis: 需要付费

**注意**: 免费套餐会在15分钟无活动后休眠

---

### 方案 5: DigitalOcean App Platform ⭐⭐⭐⭐

**适用场景**: 需要可扩展的云平台

**优点**:
- ✅ 一键部署
- ✅ 自动扩展
- ✅ 托管数据库
- ✅ 自动备份

**部署步骤**:

1. **访问 DigitalOcean**: https://cloud.digitalocean.com/apps
2. **点击 "Create App"**
3. **选择 GitHub 仓库**
4. **配置环境变量**
5. **选择数据库和Redis组件**
6. **点击 "Launch App"**

**费用**:
- 基础套餐: $5/月起
- 数据库: $15/月起
- Redis: $15/月起

---

### 方案 6: Vercel（前端优先）⭐⭐⭐

**适用场景**: 前端部署，后端另外部署

**优点**:
- ✅ 前端性能极佳
- ✅ 全球CDN
- ✅ 自动HTTPS

**限制**:
- ⚠️ Serverless Functions 有时间限制
- ⚠️ 不适合长时间运行的后端
- ⚠️ 需要外部数据库和Redis

**部署步骤**:

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/onlinedear/wiki&env=APP_URL,APP_SECRET,DATABASE_URL,REDIS_URL,STORAGE_DRIVER&project-name=notedoc&repository-name=notedoc)

**详细文档**: [Vercel 部署指南](./Vercel部署指南.md)

---

## 🔧 必需的环境变量

所有部署方案都需要配置以下环境变量：

```bash
# 应用配置
APP_URL=https://your-domain.com
APP_SECRET=your-random-secret-key-min-32-chars

# 数据库配置
DATABASE_URL=postgresql://user:password@host:5432/notedoc

# Redis配置
REDIS_URL=redis://host:6379

# 存储配置（可选）
STORAGE_DRIVER=local  # 或 s3
```

---

## 📊 部署方案选择建议

### 个人使用
- **推荐**: Docker Compose 或 Railway
- **原因**: 简单、免费或低成本

### 小团队（5-20人）
- **推荐**: Docker Compose + 宝塔面板
- **原因**: 稳定、可控、成本低

### 中型团队（20-100人）
- **推荐**: DigitalOcean 或 Render
- **原因**: 可扩展、托管服务、自动备份

### 大型企业（100+人）
- **推荐**: 自建服务器 + Docker Compose
- **原因**: 完全控制、数据安全、可定制

---

## 🚀 快速开始脚本

我们提供了一键部署脚本，让部署更简单：

### Linux/macOS 一键部署

```bash
# 下载并运行部署脚本
curl -fsSL https://raw.githubusercontent.com/onlinedear/wiki/main/scripts/quick-deploy.sh | bash
```

### Windows 一键部署

```powershell
# 使用 PowerShell
irm https://raw.githubusercontent.com/onlinedear/wiki/main/scripts/quick-deploy.ps1 | iex
```

---

## 📝 部署后配置

### 1. 首次访问
访问你的 NoteDoc 实例，会自动跳转到设置页面。

### 2. 创建管理员账户
填写管理员信息：
- 邮箱
- 密码
- 工作空间名称

### 3. 配置邮件服务（可选）
在设置中配置 SMTP 服务，用于：
- 用户邀请
- 密码重置
- 通知邮件

### 4. 配置存储（可选）
- **本地存储**: 默认，文件存储在服务器
- **S3存储**: 推荐用于生产环境

---

## 🔒 安全建议

1. **使用强密码**: APP_SECRET 至少32个字符
2. **启用HTTPS**: 使用 Let's Encrypt 免费证书
3. **定期备份**: 备份数据库和文件存储
4. **更新及时**: 定期更新到最新版本
5. **防火墙**: 只开放必要的端口（80, 443）

---

## 📚 相关文档

- [完整部署指南](./NoteDoc完整部署指南.md)
- [宝塔面板部署](./宝塔面板部署指南.md)
- [Vercel 部署](./Vercel部署指南.md)
- [快速部署到 Vercel](./快速部署到Vercel.md)
- [环境变量配置](./环境变量配置.md)

---

## 💬 获取帮助

- **GitHub Issues**: https://github.com/onlinedear/wiki/issues
- **讨论区**: https://github.com/onlinedear/wiki/discussions
- **文档**: https://notedoc.cn/docs

---

**最后更新**: 2025-11-23
