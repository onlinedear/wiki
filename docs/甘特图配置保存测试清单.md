# 甘特图配置保存功能 - 测试清单

## 测试环境准备

### 前置条件
- [ ] 已插入甘特图
- [ ] 已创建至少 3 个任务
- [ ] 已创建至少 2 个自定义字段（建议：任务状态-单选，优先级-单选）

## 功能测试

### 1. 筛选条件保存测试

#### 1.1 基本筛选保存
- [ ] 点击"筛选"按钮
- [ ] 添加一个筛选条件（如：任务状态 = 进行中）
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 点击"保存配置"按钮
- [ ] 观察按钮变回灰色
- [ ] 刷新页面（F5）
- [ ] 验证筛选条件已恢复
- [ ] 验证筛选结果正确

#### 1.2 多条件筛选保存
- [ ] 添加第二个筛选条件
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 点击"保存配置"按钮
- [ ] 刷新页面
- [ ] 验证两个筛选条件都已恢复

#### 1.3 筛选逻辑保存
- [ ] 切换筛选逻辑为"任一"
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证筛选逻辑为"任一"

#### 1.4 修改筛选条件
- [ ] 修改筛选条件的字段
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证修改已保存

#### 1.5 删除筛选条件
- [ ] 删除一个筛选条件
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证筛选条件已删除

#### 1.6 清空筛选条件
- [ ] 点击"清空全部"按钮
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证所有筛选条件已清空

### 2. 排序条件保存测试

#### 2.1 基本排序保存
- [ ] 点击"排序"按钮
- [ ] 添加一个排序条件（如：任务名 A→Z）
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 点击"保存配置"按钮
- [ ] 观察按钮变回灰色
- [ ] 刷新页面
- [ ] 验证排序条件已恢复
- [ ] 验证排序结果正确

#### 2.2 多条件排序保存
- [ ] 添加第二个排序条件
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证两个排序条件都已恢复
- [ ] 验证排序优先级正确

#### 2.3 排序方向切换
- [ ] 切换排序方向（A→Z 改为 Z→A）
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证排序方向已保存

#### 2.4 拖拽调整排序优先级 ⚠️ 重点测试
- [ ] 添加两个排序条件
- [ ] 拖拽调整顺序
- [ ] 观察"保存配置"按钮变为绿色 ✅
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证排序优先级已保存

#### 2.5 自动排序开关
- [ ] 取消勾选"自动排序"
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证自动排序开关状态已保存

#### 2.6 修改排序字段
- [ ] 修改排序条件的字段
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证修改已保存

#### 2.7 删除排序条件
- [ ] 删除一个排序条件
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证排序条件已删除

#### 2.8 清空排序条件
- [ ] 点击"清空全部"按钮
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证所有排序条件已清空

### 3. 分组条件保存测试

#### 3.1 基本分组保存
- [ ] 点击"分组"按钮
- [ ] 选择一个分组字段（如：任务状态）
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 点击"保存配置"按钮
- [ ] 观察按钮变回灰色
- [ ] 刷新页面
- [ ] 验证分组条件已恢复
- [ ] 验证分组显示正确

#### 3.2 切换分组字段
- [ ] 点击"分组"按钮
- [ ] 选择另一个分组字段
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证新的分组字段已保存

#### 3.3 清除分组
- [ ] 点击"分组"按钮
- [ ] 点击"清除分组"
- [ ] 观察"保存配置"按钮变为绿色
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证分组已清除

#### 3.4 分组折叠状态（不保存）
- [ ] 设置分组
- [ ] 折叠一个分组
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证分组已恢复但所有分组都是展开的（预期行为）

### 4. 组合配置保存测试

#### 4.1 筛选 + 排序
- [ ] 设置筛选条件
- [ ] 设置排序条件
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证筛选和排序都已恢复

#### 4.2 筛选 + 分组
- [ ] 设置筛选条件
- [ ] 设置分组条件
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证筛选和分组都已恢复

#### 4.3 排序 + 分组
- [ ] 设置排序条件
- [ ] 设置分组条件
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证排序和分组都已恢复

#### 4.4 筛选 + 排序 + 分组
- [ ] 设置筛选条件
- [ ] 设置排序条件
- [ ] 设置分组条件
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证所有配置都已恢复

### 5. 按钮状态测试

#### 5.1 初始状态
- [ ] 打开新的甘特图
- [ ] 验证"保存配置"按钮为灰色
- [ ] 验证按钮被禁用

#### 5.2 修改后状态
- [ ] 添加任意配置
- [ ] 验证按钮变为绿色
- [ ] 验证按钮可点击

#### 5.3 保存后状态
- [ ] 点击"保存配置"
- [ ] 验证按钮变回灰色
- [ ] 验证按钮被禁用

#### 5.4 再次修改
- [ ] 修改配置
- [ ] 验证按钮再次变为绿色
- [ ] 保存配置
- [ ] 验证按钮变回灰色

#### 5.5 只读模式
- [ ] 切换到只读模式（如果支持）
- [ ] 验证"保存配置"按钮被禁用

### 6. 边界情况测试

#### 6.1 空配置保存
- [ ] 清空所有配置
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证配置为空

#### 6.2 删除字段后的配置
- [ ] 创建自定义字段
- [ ] 使用该字段设置筛选/排序/分组
- [ ] 保存配置
- [ ] 删除该字段
- [ ] 刷新页面
- [ ] 验证相关配置被忽略，不会报错

#### 6.3 频繁保存
- [ ] 修改配置
- [ ] 保存
- [ ] 立即再次修改
- [ ] 再次保存
- [ ] 重复 5 次
- [ ] 验证没有性能问题

#### 6.4 不保存直接刷新
- [ ] 修改配置
- [ ] 不保存，直接刷新页面
- [ ] 验证配置恢复到上次保存的状态

### 7. 协作测试（需要两个用户）

#### 7.1 配置共享
- [ ] 用户 A 设置并保存配置
- [ ] 用户 B 刷新页面
- [ ] 验证用户 B 看到用户 A 的配置

#### 7.2 配置覆盖
- [ ] 用户 A 设置配置 1 并保存
- [ ] 用户 B 设置配置 2 并保存
- [ ] 用户 A 刷新页面
- [ ] 验证用户 A 看到配置 2

#### 7.3 未保存不影响他人
- [ ] 用户 A 修改配置但不保存
- [ ] 用户 B 刷新页面
- [ ] 验证用户 B 看不到用户 A 的未保存更改

### 8. 性能测试

#### 8.1 大量筛选条件
- [ ] 添加 10 个筛选条件
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证加载速度正常（< 2 秒）

#### 8.2 大量排序条件
- [ ] 添加 5 个排序条件
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证加载速度正常（< 2 秒）

#### 8.3 复杂组合配置
- [ ] 设置 5 个筛选条件
- [ ] 设置 3 个排序条件
- [ ] 设置分组
- [ ] 保存配置
- [ ] 刷新页面
- [ ] 验证加载速度正常（< 2 秒）

### 9. 兼容性测试

#### 9.1 浏览器兼容性
- [ ] Chrome 测试
- [ ] Firefox 测试
- [ ] Safari 测试
- [ ] Edge 测试

#### 9.2 数据兼容性
- [ ] 创建旧版本甘特图（没有 viewConfig）
- [ ] 验证正常工作
- [ ] 添加配置并保存
- [ ] 验证正常工作

### 10. 撤销/重做测试

#### 10.1 撤销保存操作
- [ ] 设置配置并保存
- [ ] 使用撤销功能（Ctrl+Z / Cmd+Z）
- [ ] 验证配置被撤销

#### 10.2 重做保存操作
- [ ] 撤销后使用重做功能（Ctrl+Y / Cmd+Shift+Z）
- [ ] 验证配置被恢复

## 测试结果记录

### 通过的测试
- 记录通过的测试项

### 失败的测试
- 记录失败的测试项
- 记录错误信息
- 记录复现步骤

### 发现的问题
1. 
2. 
3. 

### 改进建议
1. 
2. 
3. 

## 测试总结

- 测试日期：
- 测试人员：
- 测试环境：
- 总测试项：
- 通过项：
- 失败项：
- 通过率：

## 备注

- 重点关注排序条件的拖拽排序功能（已修复）
- 分组的折叠状态不会被保存（设计决策）
- 配置对所有协作者可见
