# 垃圾箱提示国际化修复说明

## 问题描述

用户反馈：页面移至垃圾箱时，下方的提示文案显示英文"Page moved to trash"，而不是中文。

## 根本原因

在 `apps/client/src/features/page/queries/page-query.ts` 文件中，以下函数使用了硬编码的英文字符串，而没有使用国际化翻译函数：

1. `useRemovePageMutation()` - 移至垃圾箱的提示
2. `useRestorePageMutation()` - 恢复页面的提示

## 修复方案

### 1. 添加翻译函数支持

为 `useRemovePageMutation` 和 `useRestorePageMutation` 函数添加 `useTranslation()` hook：

```typescript
// 修改前
export function useRemovePageMutation() {
  return useMutation({
    onSuccess: (_, pageId) => {
      notifications.show({ message: "Page moved to trash" });
      // ...
    },
  });
}

// 修改后
export function useRemovePageMutation() {
  const { t } = useTranslation();
  return useMutation({
    onSuccess: (_, pageId) => {
      notifications.show({ message: t("Page moved to trash") });
      // ...
    },
  });
}
```

### 2. 同时修复的其他提示

- `"Page restored successfully"` - 页面恢复成功提示
- `"Failed to delete page"` - 删除失败错误提示

## 修改文件

### 代码文件
- `apps/client/src/features/page/queries/page-query.ts`
  - `useRemovePageMutation()` - 添加翻译支持
  - `useRestorePageMutation()` - 添加翻译支持

### 翻译文件（已存在，无需修改）
- `apps/client/public/locales/zh-CN/translation.json`
  - `"Page moved to trash": "页面已移至垃圾箱"`
  - `"Page restored successfully": "页面恢复成功"`
  - `"Failed to delete page": "删除页面失败"`

## 效果展示

### 中文界面
- **移至垃圾箱**: "页面已移至垃圾箱" ✓
- **恢复页面**: "页面恢复成功" ✓
- **删除失败**: "删除页面失败" ✓

### 英文界面
- **Move to trash**: "Page moved to trash"
- **Restore page**: "Page restored successfully"
- **Delete failed**: "Failed to delete page"

## 验证方法

运行验证脚本：
```bash
bash scripts/verify-trash-notification.sh
```

## 测试建议

1. **切换到中文界面**
   - 设置 → 账户 → 语言 → 简体中文

2. **测试移至垃圾箱**
   - 打开任意页面
   - 点击右上角菜单 → "移至垃圾箱"
   - 验证提示显示："页面已移至垃圾箱"

3. **测试恢复页面**
   - 进入垃圾箱页面
   - 点击恢复按钮
   - 验证提示显示："页面恢复成功"

4. **测试其他语言**
   - 切换到其他语言（如英文、日文等）
   - 验证提示显示对应语言的翻译

## 相关文件

- 修复代码: `apps/client/src/features/page/queries/page-query.ts`
- 中文翻译: `apps/client/public/locales/zh-CN/translation.json`
- 验证脚本: `scripts/verify-trash-notification.sh`

## 注意事项

1. **所有语言都支持**: 修改使用了翻译函数，所有已配置的语言都会自动显示对应翻译
2. **向后兼容**: 不影响现有功能，只是将硬编码文本改为国际化文本
3. **一致性**: 确保整个应用的提示消息都使用国际化，提升用户体验

## 其他发现

在修复过程中，发现以下函数已经正确使用了翻译：
- `useDeletePageMutation()` - 永久删除页面 ✓
- `useCreatePageMutation()` - 创建页面 ✓

这次修复补全了剩余的两个函数，确保所有页面操作的提示都支持国际化。
