# 有序列表转换为无序列表的问题说明

## 问题描述

当在有序列表中选择一项并将其转换为无序列表时，会出现以下问题：
1. 被转换的项目变成无序列表（预期行为）
2. 其他有序列表项也显示为无序列表样式（非预期行为）

## 原因分析

这是 Tiptap 的默认行为。在 HTML 中，`<ol>` 和 `<ul>` 不能混合在同一个列表中。因此，当你转换一个列表项时，Tiptap 会：

1. 将原列表拆分为多个列表
2. 被选中的项目变成一个独立的 `<ul>`
3. 其他项目可能被重新组织

### HTML 结构示例

**转换前：**
```html
<ol>
  <li><h1>标题1</h1></li>
  <li><h2>标题2</h2></li>
  <li><p>普通段落1</p></li>  <!-- 选中这一项 -->
  <li><p>普通段落2</p></li>
  <li><h3>标题3</h3></li>
</ol>
```

**转换后：**
```html
<ol>
  <li><h1>标题1</h1></li>
  <li><h2>标题2</h2></li>
</ol>
<ul>
  <li><p>普通段落1</p></li>  <!-- 变成无序列表 -->
</ul>
<ol>
  <li><p>普通段落2</p></li>
  <li><h3>标题3</h3></li>
</ol>
```

## 当前实现的限制

我们的标题自动编号功能是为**纯有序列表**设计的，不支持：
- 有序列表和无序列表混合
- 列表中途转换类型

## 建议的使用方式

1. **保持列表类型一致**：如果需要使用标题编号功能，整个列表应该保持为有序列表
2. **分开创建**：如果需要无序列表，在有序列表外部单独创建
3. **转换整个列表**：如果要转换，选择整个列表一起转换

## 技术说明

标题编号功能通过以下方式实现：
- 只在 `orderedList` 类型的节点中生效
- 使用 ProseMirror Decoration Widget 渲染编号
- 编号计算基于列表项的顺序和标题级别

当列表类型改变时，编号会自动消失，因为 Decoration 只应用于 `orderedList` 节点。

## 未来改进方向

如果需要支持混合列表，可以考虑：
1. 检测列表拆分事件
2. 为拆分后的每个有序列表重新计算编号
3. 保持编号的连续性（可选）

但这会增加复杂度，建议先评估实际使用场景的需求。
