# 用户注册功能 - 快速开始

## 功能简介

用户可以通过注册页面自助创建账户，无需管理员邀请。注册后的用户将自动获得"用户"角色，并加入默认用户组。

## 使用方法

### 用户注册

1. 访问注册页面：`http://localhost:5173/register`

2. 填写注册信息：
   - **姓名**：您的真实姓名或昵称
   - **邮箱**：用于登录的邮箱地址（必须唯一）
   - **密码**：至少 8 个字符
   - **确认密码**：再次输入密码以确认

3. 点击"注册"按钮

4. 注册成功后会自动登录并跳转到首页

### 从登录页面访问

在登录页面底部，点击"还没有账户？注册"链接即可跳转到注册页面。

### 从注册页面返回登录

在注册页面底部，点击"已有账户？登录"链接即可返回登录页面。

## 注册后的权限

新注册用户将获得：
- **角色**：用户（User）
- **用户组**：默认用户组（注册用户）
- **权限**：
  - 可以查看和编辑有权限的文档
  - 可以创建个人文档
  - 可以加入文档库和用户组
  - 不能管理工作空间设置

## 限制说明

1. **SSO 强制登录**：如果管理员启用了 SSO 强制登录，注册功能将被禁用
2. **邮箱唯一性**：每个邮箱只能注册一次
3. **密码要求**：密码必须至少 8 个字符

## 管理员操作

管理员可以在用户管理页面（`/settings/members`）查看和管理注册用户：
- 查看所有注册用户
- 修改用户角色
- 添加用户到其他用户组
- 停用或删除用户

## 测试注册功能

### 手动测试

1. 启动开发服务器：
   ```bash
   pnpm dev
   ```

2. 访问注册页面：`http://localhost:5173/register`

3. 填写测试信息并提交

### API 测试

使用提供的测试脚本：
```bash
./scripts/test-register.sh
```

## 常见问题

### Q: 注册后无法登录？
A: 请检查：
- 邮箱地址是否正确
- 密码是否正确（区分大小写）
- 账户是否被管理员停用

### Q: 提示"邮箱已存在"？
A: 该邮箱已被注册，请使用其他邮箱或联系管理员重置密码

### Q: 看不到注册页面？
A: 可能是管理员启用了 SSO 强制登录，请联系管理员

### Q: 注册后权限不足？
A: 新注册用户默认为"用户"角色，权限有限。如需更高权限，请联系管理员

## 技术细节

- 注册端点：`POST /api/auth/register`
- 密码加密：使用 bcrypt 哈希
- 自动登录：注册成功后自动设置认证 Cookie
- 默认语言：根据浏览器设置（支持中英文）

## 相关文档

- [用户注册功能说明](./用户注册功能说明.md) - 完整的技术实现文档
- [用户管理](http://localhost:5173/settings/members) - 管理员用户管理页面
